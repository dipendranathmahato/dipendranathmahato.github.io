<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <title>Resources | Dipendranath Mahato</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts & Icons -->
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" />
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/academicons/css/academicons.min.css" />

  <!-- MathJax -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <!-- Site CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- Page-local styling: independent + stylish resources design -->
<style>
  /* Uses template’s .main */
  .main { min-width: 0; }

  /* ===== New Resources layout: split directory ===== */
  .res-shell{
    display:grid;
    grid-template-columns: 360px 1fr;
    gap: 14px;
    align-items:start;
  }
  @media (max-width: 980px){
    .res-shell{ grid-template-columns: 1fr; }
  }

  .res-panel{
    border-radius: 18px;
    border: 1px solid rgba(0,0,0,.08);
    background: rgba(255,255,255,.60);
    box-shadow: 0 10px 24px rgba(0,0,0,.07);
    overflow: hidden;
  }
  html[data-theme="dark"] .res-panel{
    border: 1px solid rgba(255,255,255,.10);
    background: rgba(17,24,39,.56);
    box-shadow: 0 12px 28px rgba(0,0,0,.25);
  }

  .res-head{
    padding: 16px 16px 12px 16px;
    border-bottom: 1px solid rgba(0,0,0,.06);
    background:
      linear-gradient(180deg, rgba(59,130,246,.10), transparent 65%),
      radial-gradient(900px 220px at 15% 0%, rgba(34,197,94,.10), transparent 55%);
  }
  html[data-theme="dark"] .res-head{
    border-bottom: 1px solid rgba(255,255,255,.08);
    background:
      linear-gradient(180deg, rgba(59,130,246,.14), transparent 65%),
      radial-gradient(900px 220px at 15% 0%, rgba(34,197,94,.12), transparent 55%);
  }

  .res-head h1{
    margin: 0 0 6px 0;
    font-size: 1.25rem;
    letter-spacing: .2px;
  }
  .res-head p{
    margin: 0;
    font-size: .92rem;
    line-height: 1.45;
    opacity: .82;
    max-width: 78ch;
  }

  .res-tools{
    padding: 12px 16px 14px 16px;
    display:flex;
    flex-direction:column;
    gap: 10px;
  }

  .res-search{
    display:flex;
    align-items:center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 14px;
    border: 1px solid rgba(0,0,0,.10);
    background: rgba(255,255,255,.55);
  }
  html[data-theme="dark"] .res-search{
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(17,24,39,.45);
  }
  .res-search i{ opacity:.75; }
  .res-search input{
    border:none; outline:none; background:transparent;
    width:100%;
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    font-size: .95rem;
    color: inherit;
  }

  .res-tabs{
    display:flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .res-tab{
    border-radius: 999px;
    padding: 8px 10px;
    border: 1px solid rgba(0,0,0,.10);
    background: rgba(255,255,255,.45);
    cursor:pointer;
    font-size:.86rem;
    display:inline-flex;
    align-items:center;
    gap:8px;
    transition: transform .12s ease, background .12s ease, border-color .12s ease;
    user-select:none;
  }
  .res-tab:hover{ transform: translateY(-1px); }
  .res-tab.active{
    background: rgba(59,130,246,.14);
    border-color: rgba(59,130,246,.30);
  }
  html[data-theme="dark"] .res-tab{
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(17,24,39,.38);
  }
  html[data-theme="dark"] .res-tab.active{
    background: rgba(59,130,246,.18);
    border-color: rgba(59,130,246,.34);
  }

  /* Left list */
  .res-list{
    padding: 6px;
    max-height: calc(100vh - 280px);
    overflow:auto;
  }
  @media (max-width: 980px){
    .res-list{ max-height: 380px; }
  }

  .res-item{
    display:flex;
    align-items:flex-start;
    gap: 10px;
    padding: 10px 10px;
    border-radius: 14px;
    cursor:pointer;
    border: 1px solid transparent;
    transition: background .12s ease, border-color .12s ease, transform .12s ease;
  }
  .res-item:hover{
    background: rgba(0,0,0,.03);
    transform: translateY(-1px);
  }
  html[data-theme="dark"] .res-item:hover{
    background: rgba(255,255,255,.04);
  }
  .res-item.active{
    background: rgba(59,130,246,.10);
    border-color: rgba(59,130,246,.20);
  }
  html[data-theme="dark"] .res-item.active{
    background: rgba(59,130,246,.14);
    border-color: rgba(59,130,246,.26);
  }

  .res-dot{
    width: 36px; height: 36px;
    border-radius: 12px;
    display:flex;
    align-items:center;
    justify-content:center;
    background: rgba(59,130,246,.14);
    border: 1px solid rgba(59,130,246,.22);
    flex: 0 0 auto;
  }
  html[data-theme="dark"] .res-dot{
    background: rgba(59,130,246,.16);
    border: 1px solid rgba(59,130,246,.26);
  }

  .res-item-title{
    margin: 0;
    font-size: .92rem;
    line-height: 1.25;
  }
  .res-item-meta{
    margin-top: 3px;
    font-size: .80rem;
    opacity: .72;
    display:flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .res-pill{
    padding: 3px 8px;
    border-radius: 999px;
    border: 1px dashed rgba(0,0,0,.14);
  }
  html[data-theme="dark"] .res-pill{
    border: 1px dashed rgba(255,255,255,.16);
  }

  /* Right detail */
  .res-detail{
    padding: 16px;
  }
  .res-detail-top{
    display:flex;
    align-items:flex-start;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
  }
  .res-detail h2{
    margin: 0;
    font-size: 1.15rem;
    letter-spacing: .2px;
  }
  .res-detail .subtitle{
    margin: 6px 0 0 0;
    opacity: .82;
    line-height: 1.5;
    max-width: 78ch;
  }
  .res-actions{
    display:flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items:center;
  }
  .res-actions a,
  .res-actions button{
    border-radius: 999px;
    padding: 9px 11px;
    font-size: .88rem;
    border: 1px solid rgba(0,0,0,.12);
    background: rgba(255,255,255,.55);
    cursor:pointer;
    text-decoration:none;
    color: inherit;
    display:inline-flex;
    align-items:center;
    gap: 8px;
    transition: transform .12s ease;
  }
  .res-actions a:hover,
  .res-actions button:hover{ transform: translateY(-1px); }
  html[data-theme="dark"] .res-actions a,
  html[data-theme="dark"] .res-actions button{
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(17,24,39,.45);
  }

  .res-embed{
    margin-top: 14px;
    border-radius: 16px;
    overflow:hidden;
    border: 1px solid rgba(0,0,0,.10);
    background: rgba(255,255,255,.45);
    height: 520px;
  }
  html[data-theme="dark"] .res-embed{
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(17,24,39,.40);
  }
  .res-embed iframe{
    width:100%;
    height:100%;
    border:none;
  }
  .embed-hint{
    margin-top: 10px;
    font-size: .88rem;
    opacity: .78;
    line-height: 1.45;
  }

  /* Small footer spacing */
  .footer{ margin-top: 14px; }
</style>

</head>

<body>
  <div class="page">
    <!-- ================= HEADER / NAV ================= -->
    <header class="top-nav">
      <div class="brand">
        <img src="/assets/images/Tulane_University_Logo.svg.png"
             class="nav-logo"
             alt="Tulane University Logo" />
        <a href="index.html" class="brand-name-link">
          <span>Dipendranath Mahato</span>
        </a>
      </div>

      <!-- Mobile menu button -->
      <button class="nav-toggle" aria-label="Toggle navigation">
        <i class="fa-solid fa-bars"></i>
      </button>

      <nav class="top-nav-links">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="research.html">Research</a>
        <a href="teaching.html">Teaching</a>
        <a href="presentations.html">Presentations</a>

        <div class="dropdown">
          <button class="dropbtn">
            More <i class="fa-solid fa-chevron-down"></i>
          </button>
          <div class="dropdown-content">
            <a href="outreach-services.html">Outreach &amp; Services</a>
            <a href="blogs.html">Blogs</a>
            <a href="resources.html" aria-current="page">Resources</a>
          </div>
        </div>
      </nav>

      <div class="controls">
        <button class="pill-button secondary theme-toggle" type="button" aria-label="Toggle dark mode">
          <i class="fa-solid fa-moon"></i>
          <span>Dark</span>
        </button>

        <a href="cv.html" class="pill-button primary cv-button">
          <i class="fa-solid fa-file-lines"></i>
          <span>CV</span>
        </a>
      </div>
    </header>

    <!-- ================= LAYOUT ================= -->
    <main class="layout">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="avatar">
          <img src="/assets/images/PXL_20250330_220427523-1575x2800-compressed.jpg"
               alt="Dipendranath Mahato" />
          <div class="status-chip">IN JOB MARKET</div>
        </div>

        <div class="name">Dipendranath Mahato</div>
        <div class="title">Ph.D. Candidate in Mathematics</div>
        <div class="affiliation">
          <strong>Tulane University</strong><br />
          Department of Mathematics
        </div>

        <div class="research-area-block">
          <div class="research-area-title">
            <i class="ai ai-academic-cap"></i>
            <span>Research Areas</span>
          </div>
          <div class="research-chips">
            <a href="research.html#commutative" class="chip">Commutative Algebra</a>
            <a href="research.html#algebraic-geometry" class="chip">Algebraic Geometry</a>
            <a href="research.html#combinatorial" class="chip">Combinatorial Algebra</a>
          </div>
        </div>

        <div class="sidebar-section">
          <h3>Contact</h3>
          <ul class="info-list">
            <li>
              <i class="fa-regular fa-envelope"></i>
              <span><a href="mailto:dmahato@tulane.edu">dmahato@tulane.edu</a></span>
            </li>
            <li>
              <i class="fa-regular fa-envelope"></i>
              <span><a href="mailto:dipendranathmahato@gmail.com">dipendranathmahato@gmail.com</a></span>
            </li>
            <li>
              <i class="fa-regular fa-building"></i>
              <span>Office 416-J, Gibson Hall<br />Department of Mathematics</span>
            </li>
            <li>
              <i class="fa-solid fa-location-dot"></i>
              <span>New Orleans-70118, LA, USA</span>
            </li>
          </ul>
        </div>

        <div class="sidebar-section">
          <h3>Online</h3>
          <div class="social-links">
            <a href="https://github.com/dipendranathmahato" aria-label="GitHub"><i class="fa-brands fa-github"></i></a>
            <a href="https://scholar.google.com/citations?hl=en&authuser=1&user=dRoXm28AAAAJ" aria-label="Google Scholar"><i class="ai ai-google-scholar"></i></a>
            <a href="https://orcid.org/0000-0003-4122-2622" aria-label="ORCID"><i class="fa-brands fa-orcid"></i></a>
            <a href="https://www.linkedin.com/in/dipendranathmahato" aria-label="LinkedIn"><i class="fa-brands fa-linkedin-in"></i></a>
            <a href="https://www.researchgate.net/profile/Dipendranath-Mahato-2" aria-label="ResearchGate"><i class="fa-brands fa-researchgate"></i></a>
            <a href="https://arxiv.org/search/?query=Mahato%2C+Dipendranath&searchtype=author&abstracts=show&order=-announced_date_first&size=50" aria-label="arXiv"><i class="ai ai-arxiv"></i></a>
            <a href="https://tulane.academia.edu/DipendranathMahato" aria-label="Academia"><i class="ai ai-academia"></i></a>
          </div>
        </div>
      </aside>

      <!-- ================= MAIN CONTENT ================= -->
      <section class="main">
        <div class="res-panel">
          <div class="res-head">
            <h1>Resources</h1>
            <p>A curated directory of tools and reading notes I use often. Select an item to view details and preview.</p>
          </div>
        </div>
      
        <div class="res-shell" style="margin-top:14px;">
          <!-- LEFT: directory -->
          <div class="res-panel">
            <div class="res-tools">
              <div class="res-search">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input id="resSearch" type="text" placeholder="Search (arXiv, Vakil, LaTeX, OEIS…)" autocomplete="off" />
              </div>
              <div class="res-tabs" id="chipRow"></div>
            </div>
      
            <div class="res-list" id="resourcesList">
              <!-- injected by JS -->
            </div>
          </div>
      
          <!-- RIGHT: details -->
          <div class="res-panel">
            <div class="res-detail" id="resourceDetail">
              <!-- injected by JS -->
            </div>
          </div>
        </div>
      
        <div class="footer">
          © <span id="year"></span> Copyright @ Dipendranath Mahato —
          Hosted on <a href="https://pages.github.com/">GitHub Pages</a>.
        </div>
      </section>

    </main>
  </div>

  <!-- ================= Preview Modal ================= -->
  <div class="modal" id="previewModal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-label="Resource preview">
      <div class="modal-head">
        <div class="mh-title">
          <i class="fa-solid fa-up-right-from-square" style="opacity:.75;"></i>
          <strong id="modalTitle">Preview</strong>
        </div>
        <div class="mh-actions">
          <a id="modalOpenBtn" href="#" target="_blank" rel="noopener">
            <i class="fa-solid fa-arrow-up-right-from-square"></i>
            Open
          </a>
          <button id="modalCloseBtn" type="button">
            <i class="fa-solid fa-xmark"></i>
            Close
          </button>
        </div>
      </div>
      <div class="modal-body">
        <iframe id="modalFrame" title="Embedded preview" src="about:blank"></iframe>
        <div class="modal-note">
          If the preview area stays blank, the site likely blocks embedding. Click <b>Open</b> to view it in a new tab.
        </div>
      </div>
    </div>
  </div>

  <!-- ================= SCRIPTS ================= -->
  <script>
    // ----- Footer year -----
    const yearSpan = document.getElementById("year");
    if (yearSpan) yearSpan.textContent = new Date().getFullYear();

    // ----- Mobile hamburger toggle -----
    const navToggle = document.querySelector('.nav-toggle');
    const navLinks  = document.querySelector('.top-nav-links');
    if (navToggle && navLinks) {
      navToggle.addEventListener('click', () => navLinks.classList.toggle('open'));
      navLinks.addEventListener('click', (event) => {
        if (event.target.tagName.toLowerCase() === 'a') navLinks.classList.remove('open');
      });
    }

    // ----- "More" dropdown click toggle (desktop; CSS flattens on mobile) -----
    const dropdown = document.querySelector('.dropdown');
    const dropbtn  = dropdown ? dropdown.querySelector('.dropbtn') : null;
    if (dropbtn) {
      dropbtn.addEventListener('click', (event) => {
        event.preventDefault();
        event.stopPropagation();
        dropdown.classList.toggle('dropdown-open');
      });
    }
    document.addEventListener('click', (event) => {
      if (dropdown && !dropdown.contains(event.target)) dropdown.classList.remove('dropdown-open');
    });

    // ----- DARK MODE TOGGLE -----
    const root        = document.documentElement;
    const themeToggle = document.querySelector('.theme-toggle');
    const THEME_KEY   = 'dm-theme';

    function applyTheme(theme) {
      root.setAttribute('data-theme', theme);
      if (!themeToggle) return;
      const icon  = themeToggle.querySelector('i');
      const label = themeToggle.querySelector('span');
      if (theme === 'dark') {
        if (icon) icon.className = 'fa-solid fa-sun';
        if (label) label.textContent = 'Light';
      } else {
        if (icon) icon.className = 'fa-solid fa-moon';
        if (label) label.textContent = 'Dark';
      }
    }
    const savedTheme = localStorage.getItem(THEME_KEY);
    const initialTheme = (savedTheme === 'dark' || savedTheme === 'light') ? savedTheme : 'light';
    applyTheme(initialTheme);

    if (themeToggle) {
      themeToggle.addEventListener('click', () => {
        const current = root.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
        const next    = current === 'dark' ? 'light' : 'dark';
        localStorage.setItem(THEME_KEY, next);
        applyTheme(next);
      });
    }

    // ================== RESOURCES DATA ==================
    const RESOURCES = [
      // Favorite Working Sites and Resources
      { section: "Favorite Working Sites and Resources", title: "arXiv", desc: "Preprints and recent papers.", url: "https://arxiv.org/", tag: "Research", icon: "ai ai-arxiv", preview: true },
      { section: "Favorite Working Sites and Resources", title: "arXiv — Commutative Algebra", desc: "Direct category link for commutative algebra.", url: "https://arxiv.org/list/math.AC/recent", tag: "arXiv", icon: "ai ai-arxiv", preview: true },
      { section: "Favorite Working Sites and Resources", title: "MathSciNet", desc: "AMS database for reviews and bibliographic data.", url: "https://mathscinet.ams.org/", tag: "AMS", icon: "fa-solid fa-book", preview: true },
      { section: "Favorite Working Sites and Resources", title: "commalg.org", desc: "Commutative algebra community hub.", url: "https://www.commalg.org/", tag: "Community", icon: "fa-solid fa-people-group", preview: true },
      { section: "Favorite Working Sites and Resources", title: "AMS Sectional Meetings", desc: "Meeting schedules and announcements.", url: "https://www.ams.org/meetings/sectionalmeetings.html", tag: "AMS", icon: "fa-solid fa-calendar-days", preview: true },
      { section: "Favorite Working Sites and Resources", title: "Commutative Diagram Creation (tikzcd)", desc: "Quick tikzcd diagram generator.", url: "https://tikzcd.yichuanshen.de/", tag: "LaTeX", icon: "fa-solid fa-diagram-project", preview: true },
      { section: "Favorite Working Sites and Resources", title: "Table Generator (LaTeX)", desc: "Create LaTeX tables visually.", url: "https://www.tablesgenerator.com/", tag: "LaTeX", icon: "fa-solid fa-table", preview: true },
      { section: "Favorite Working Sites and Resources", title: "MathJax", desc: "Beautiful math rendering for the web.", url: "https://www.mathjax.org/", tag: "Web", icon: "fa-solid fa-square-root-variable", preview: true },
      { section: "Favorite Working Sites and Resources", title: "CTAN", desc: "Comprehensive TeX Archive Network.", url: "https://ctan.org/", tag: "TeX", icon: "fa-solid fa-box-archive", preview: true },
      { section: "Favorite Working Sites and Resources", title: "OEIS", desc: "The On-Line Encyclopedia of Integer Sequences.", url: "https://oeis.org/", tag: "Database", icon: "fa-solid fa-list-ol", preview: true },
      { section: "Favorite Working Sites and Resources", title: "TWOPLES (Directed Reading Program)", desc: "Online directed reading program.", url: "https://sites.google.com/view/twoples", tag: "DRP", icon: "fa-solid fa-graduation-cap", preview: true },
      { section: "Favorite Working Sites and Resources", title: "AMS Mathematical Opportunities", desc: "AMS opportunities and programs.", url: "https://www.ams.org/programs/students/empowerment-opportunities", tag: "AMS", icon: "fa-solid fa-handshake", preview: true },

      // Favorite Reading Materials
      { section: "Favorite Reading Materials", title: "Expository Papers — Keith Conrad", desc: "Expository notes and handouts.", url: "https://kconrad.math.uconn.edu/", tag: "Notes", icon: "fa-solid fa-feather", preview: true },
      { section: "Favorite Reading Materials", title: "Notes on Class Field Theory — Kiran S. Kedlaya", desc: "Course notes and references.", url: "https://kskedlaya.org/", tag: "Number Theory", icon: "fa-solid fa-landmark", preview: true },
      { section: "Favorite Reading Materials", title: "Algebraic Number Theory — J. S. Milne", desc: "Classic notes and texts.", url: "https://www.jmilne.org/math/CourseNotes/ant.html", tag: "Number Theory", icon: "fa-solid fa-book-open", preview: true },
      { section: "Favorite Reading Materials", title: "Foundations of Algebraic Geometry — Ravi Vakil", desc: "Widely used notes (FOAG).", url: "https://math216.wordpress.com/", tag: "AG", icon: "fa-solid fa-compass-drafting", preview: true },
      { section: "Favorite Reading Materials", title: "The Rising Sea (FOAG Notes) — Stanford", desc: "Vakil’s notes: The Rising Sea.", url: "https://math.stanford.edu/~vakil/216blog/FOAGnov1817public.pdf", tag: "AG", icon: "fa-solid fa-water", preview: true },
      { section: "Favorite Reading Materials", title: "Algebraic Geometry Notes — Andreas Gathmann", desc: "Lecture notes and exercises.", url: "https://agag-gathmann.math.rptu.de/", tag: "AG", icon: "fa-solid fa-chalkboard", preview: true },
      { section: "Favorite Reading Materials", title: "Symbolic Powers — Eloísa Grifo", desc: "Lecture notes focused on symbolic powers.", url: "https://eloisagrifo.github.io/symbolic_powers_notes.pdf", tag: "CA", icon: "fa-solid fa-infinity", preview: true },
      { section: "Favorite Reading Materials", title: "Interpolation Problems — Jack Huizenga", desc: "Notes and materials on interpolation.", url: "https://sites.psu.edu/huizenga/files/2019/01/interpolation.pdf", tag: "Interpolation", icon: "fa-solid fa-bullseye", preview: true }
    ];

    const SECTION_ORDER = [
      "Favorite Working Sites and Resources",
      "Favorite Reading Materials"
    ];

    const CHIP_ORDER = ["All", ...SECTION_ORDER];

    const iconHTML = (cls) => {
      if (!cls) return '<i class="fa-solid fa-link"></i>';
      if (cls.startsWith("ai ")) return `<i class="${cls}"></i>`;
      if (cls.startsWith("fa-")) return `<i class="${cls}"></i>`;
      return `<i class="${cls}"></i>`;
    };

    <script>
  // ----- Footer year -----
  const yearSpan = document.getElementById("year");
  if (yearSpan) yearSpan.textContent = new Date().getFullYear();

  // ----- Mobile hamburger toggle -----
  const navToggle = document.querySelector('.nav-toggle');
  const navLinks  = document.querySelector('.top-nav-links');
  if (navToggle && navLinks) {
    navToggle.addEventListener('click', () => navLinks.classList.toggle('open'));
    navLinks.addEventListener('click', (event) => {
      if (event.target.tagName.toLowerCase() === 'a') navLinks.classList.remove('open');
    });
  }

  // ----- Dropdown toggle -----
  const dropdown = document.querySelector('.dropdown');
  const dropbtn  = dropdown ? dropdown.querySelector('.dropbtn') : null;
  if (dropbtn) {
    dropbtn.addEventListener('click', (event) => {
      event.preventDefault();
      event.stopPropagation();
      dropdown.classList.toggle('dropdown-open');
    });
  }
  document.addEventListener('click', (event) => {
    if (dropdown && !dropdown.contains(event.target)) dropdown.classList.remove('dropdown-open');
  });

  // ----- DARK MODE TOGGLE -----
  const root        = document.documentElement;
  const themeToggle = document.querySelector('.theme-toggle');
  const THEME_KEY   = 'dm-theme';

  function applyTheme(theme) {
    root.setAttribute('data-theme', theme);
    if (!themeToggle) return;
    const icon  = themeToggle.querySelector('i');
    const label = themeToggle.querySelector('span');
    if (theme === 'dark') {
      if (icon) icon.className = 'fa-solid fa-sun';
      if (label) label.textContent = 'Light';
    } else {
      if (icon) icon.className = 'fa-solid fa-moon';
      if (label) label.textContent = 'Dark';
    }
  }
  const savedTheme = localStorage.getItem(THEME_KEY);
  const initialTheme = (savedTheme === 'dark' || savedTheme === 'light') ? savedTheme : 'light';
  applyTheme(initialTheme);
  if (themeToggle) {
    themeToggle.addEventListener('click', () => {
      const current = root.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
      const next    = current === 'dark' ? 'light' : 'dark';
      localStorage.setItem(THEME_KEY, next);
      applyTheme(next);
    });
  }

  // ================== RESOURCES DATA ==================
  const RESOURCES = [
    // Favorite Working Sites and Resources
    { section: "Favorite Working Sites and Resources", title: "arXiv", desc: "Preprints and recent papers.", url: "https://arxiv.org/", tag: "Research", icon: "ai ai-arxiv", preview: true },
    { section: "Favorite Working Sites and Resources", title: "arXiv — Commutative Algebra", desc: "Direct category link for commutative algebra.", url: "https://arxiv.org/list/math.AC/recent", tag: "arXiv", icon: "ai ai-arxiv", preview: true },
    { section: "Favorite Working Sites and Resources", title: "MathSciNet", desc: "AMS database for reviews and bibliographic data.", url: "https://mathscinet.ams.org/", tag: "AMS", icon: "fa-solid fa-book", preview: true },
    { section: "Favorite Working Sites and Resources", title: "commalg.org", desc: "Commutative algebra community hub.", url: "https://www.commalg.org/", tag: "Community", icon: "fa-solid fa-people-group", preview: true },
    { section: "Favorite Working Sites and Resources", title: "AMS Sectional Meetings", desc: "Meeting schedules and announcements.", url: "https://www.ams.org/meetings/sectionalmeetings.html", tag: "AMS", icon: "fa-solid fa-calendar-days", preview: true },
    { section: "Favorite Working Sites and Resources", title: "Commutative Diagram Creation (tikzcd)", desc: "Quick tikzcd diagram generator.", url: "https://tikzcd.yichuanshen.de/", tag: "LaTeX", icon: "fa-solid fa-diagram-project", preview: true },
    { section: "Favorite Working Sites and Resources", title: "Table Generator (LaTeX)", desc: "Create LaTeX tables visually.", url: "https://www.tablesgenerator.com/", tag: "LaTeX", icon: "fa-solid fa-table", preview: true },
    { section: "Favorite Working Sites and Resources", title: "MathJax", desc: "Beautiful math rendering for the web.", url: "https://www.mathjax.org/", tag: "Web", icon: "fa-solid fa-square-root-variable", preview: true },
    { section: "Favorite Working Sites and Resources", title: "CTAN", desc: "Comprehensive TeX Archive Network.", url: "https://ctan.org/", tag: "TeX", icon: "fa-solid fa-box-archive", preview: true },
    { section: "Favorite Working Sites and Resources", title: "OEIS", desc: "The On-Line Encyclopedia of Integer Sequences.", url: "https://oeis.org/", tag: "Database", icon: "fa-solid fa-list-ol", preview: true },
    { section: "Favorite Working Sites and Resources", title: "TWOPLES (Directed Reading Program)", desc: "Online directed reading program.", url: "https://sites.google.com/view/twoples", tag: "DRP", icon: "fa-solid fa-graduation-cap", preview: true },
    { section: "Favorite Working Sites and Resources", title: "AMS Mathematical Opportunities", desc: "AMS opportunities and programs.", url: "https://www.ams.org/programs/students/empowerment-opportunities", tag: "AMS", icon: "fa-solid fa-handshake", preview: true },

    // Favorite Reading Materials
    { section: "Favorite Reading Materials", title: "Expository Papers — Keith Conrad", desc: "Expository notes and handouts.", url: "https://kconrad.math.uconn.edu/", tag: "Notes", icon: "fa-solid fa-feather", preview: true },
    { section: "Favorite Reading Materials", title: "Notes on Class Field Theory — Kiran S. Kedlaya", desc: "Course notes and references.", url: "https://kskedlaya.org/", tag: "Number Theory", icon: "fa-solid fa-landmark", preview: true },
    { section: "Favorite Reading Materials", title: "Algebraic Number Theory — J. S. Milne", desc: "Classic notes and texts.", url: "https://www.jmilne.org/math/CourseNotes/ant.html", tag: "Number Theory", icon: "fa-solid fa-book-open", preview: true },
    { section: "Favorite Reading Materials", title: "Foundations of Algebraic Geometry — Ravi Vakil", desc: "Widely used notes (FOAG).", url: "https://math216.wordpress.com/", tag: "AG", icon: "fa-solid fa-compass-drafting", preview: true },
    { section: "Favorite Reading Materials", title: "The Rising Sea (FOAG Notes) — Stanford", desc: "Vakil’s notes: The Rising Sea.", url: "https://math.stanford.edu/~vakil/216blog/FOAGnov1817public.pdf", tag: "AG", icon: "fa-solid fa-water", preview: true },
    { section: "Favorite Reading Materials", title: "Algebraic Geometry Notes — Andreas Gathmann", desc: "Lecture notes and exercises.", url: "https://agag-gathmann.math.rptu.de/", tag: "AG", icon: "fa-solid fa-chalkboard", preview: true },
    { section: "Favorite Reading Materials", title: "Symbolic Powers — Eloísa Grifo", desc: "Lecture notes focused on symbolic powers.", url: "https://eloisagrifo.github.io/symbolic_powers_notes.pdf", tag: "CA", icon: "fa-solid fa-infinity", preview: true },
    { section: "Favorite Reading Materials", title: "Interpolation Problems — Jack Huizenga", desc: "Notes and materials on interpolation.", url: "https://sites.psu.edu/huizenga/files/2019/01/interpolation.pdf", tag: "Interpolation", icon: "fa-solid fa-bullseye", preview: true }
  ];

  const SECTION_ORDER = [
    "Favorite Working Sites and Resources",
    "Favorite Reading Materials"
  ];
  const CHIP_ORDER = ["All", ...SECTION_ORDER];

  const iconHTML = (cls) => {
    if (!cls) return '<i class="fa-solid fa-link"></i>';
    if (cls.startsWith("ai ")) return `<i class="${cls}"></i>`;
    if (cls.startsWith("fa-")) return `<i class="${cls}"></i>`;
    return `<i class="${cls}"></i>`;
  };

  // ================== DIRECTORY UI ==================
  const chipRow = document.getElementById("chipRow");
  const searchInput = document.getElementById("resSearch");
  const listEl = document.getElementById("resourcesList");
  const detailEl = document.getElementById("resourceDetail");

  let activeChip = "All";
  let query = "";
  let activeIndex = 0;

  function renderChips(){
    chipRow.innerHTML = "";
    CHIP_ORDER.forEach(name => {
      const btn = document.createElement("button");
      btn.className = "res-tab" + (name === activeChip ? " active" : "");
      btn.type = "button";
      btn.innerHTML = `<i class="fa-solid fa-layer-group" style="opacity:.75;"></i> ${name}`;
      btn.addEventListener("click", () => {
        activeChip = name;
        activeIndex = 0;
        renderAll();
      });
      chipRow.appendChild(btn);
    });
  }

  function getFiltered(){
    const q = query.trim().toLowerCase();
    return RESOURCES
      .map((r, idx) => ({...r, _idx: idx}))
      .filter(r => {
        const inChip = (activeChip === "All") ? true : (r.section === activeChip);
        if (!inChip) return false;
        if (!q) return true;
        const hay = `${r.title} ${r.desc || ""} ${r.tag || ""} ${r.section}`.toLowerCase();
        return hay.includes(q);
      });
  }

  function renderList(items){
    listEl.innerHTML = "";
    if (items.length === 0){
      listEl.innerHTML = `<div style="padding:14px; opacity:.75;">No matches.</div>`;
      detailEl.innerHTML = `<div style="padding:16px; opacity:.75;">Try a different keyword.</div>`;
      return;
    }

    // clamp active index
    if (activeIndex >= items.length) activeIndex = 0;

    items.forEach((r, i) => {
      const row = document.createElement("div");
      row.className = "res-item" + (i === activeIndex ? " active" : "");
      row.innerHTML = `
        <div class="res-dot">${iconHTML(r.icon)}</div>
        <div style="min-width:0;">
          <h3 class="res-item-title">${r.title}</h3>
          <div class="res-item-meta">
            <span class="res-pill">${r.section}</span>
            ${r.tag ? `<span class="res-pill">${r.tag}</span>` : ``}
          </div>
        </div>
      `;
      row.addEventListener("click", () => {
        activeIndex = i;
        renderAll(false);
      });
      listEl.appendChild(row);
    });
  }

  function renderDetail(items){
    const r = items[activeIndex];
    detailEl.innerHTML = `
      <div class="res-detail-top">
        <div>
          <h2>${r.title}</h2>
          <p class="subtitle">${r.desc || ""}</p>
        </div>
        <div class="res-actions">
          <a href="${r.url}" target="_blank" rel="noopener">
            <i class="fa-solid fa-arrow-up-right-from-square"></i> Open
          </a>
          <button type="button" id="toggleEmbedBtn">
            <i class="fa-solid fa-eye"></i> Preview
          </button>
        </div>
      </div>

      <div class="embed-hint">
        Preview works for many sites, but some (e.g., certain AMS pages) block embedding.
      </div>

      <div class="res-embed" id="embedWrap" style="display:none;">
        <iframe title="Embedded preview" src="about:blank" id="embedFrame"></iframe>
      </div>
    `;

    const toggleBtn = document.getElementById("toggleEmbedBtn");
    const wrap = document.getElementById("embedWrap");
    const frame = document.getElementById("embedFrame");

    toggleBtn.addEventListener("click", () => {
      const open = wrap.style.display !== "none";
      if (open) {
        wrap.style.display = "none";
        frame.src = "about:blank";
        toggleBtn.innerHTML = `<i class="fa-solid fa-eye"></i> Preview`;
      } else {
        wrap.style.display = "block";
        frame.src = r.url;
        toggleBtn.innerHTML = `<i class="fa-solid fa-eye-slash"></i> Hide Preview`;
      }
    });
  }

  function renderAll(scrollListTop = true){
    renderChips();
    const items = getFiltered();
    renderList(items);
    renderDetail(items);

    if (scrollListTop && listEl) listEl.scrollTop = 0;
  }

  searchInput.addEventListener("input", (e) => {
    query = e.target.value || "";
    activeIndex = 0;
    renderAll();
  });

  // init
  renderAll();
</script>
</body>
</html>
